'use client';
import { useSearchParams } from 'next/navigation';
import { useState } from 'react';

export default function SignupPage() {
  const params = useSearchParams();
  const [loading, setLoading] = useState(false);

  async function handleSubmit(e: any) {
    e.preventDefault();
    setLoading(true);
    const res = await fetch('/api/register', {
      method: 'POST',
      body: JSON.stringify({
        companyName: e.target.company.value,
        adminEmail: e.target.email.value,
        password: e.target.password.value,
        chosenPriceId: params.get('priceId'),
      }),
    });

    const { url } = await res.json();
    window.location.href = url;
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4 max-w-md mx-auto py-10">
      {/* campos */}
      <button className="btn-primary" disabled={loading}>
        {loading ? 'Redirecionandoâ€¦' : 'Continuar'}
      </button>
    </form>
  );
}
